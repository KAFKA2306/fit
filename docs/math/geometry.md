# 幾何数学ガイド

衣装リターゲットシステムで使用する3つの核心技術です。

---

## 1. OBB (Oriented Bounding Box)
「形を理解する」

ただの箱(AABB)ではなく、中身の傾きに合わせて回転した箱を作ります。
これにより、衣装と素体の「向き」や「大きさ」の違いを正確に把握できます。

```mermaid
flowchart LR
    Points["頂点群"] --> Cov["共分散行列"] --> PCA["主成分分析"] --> Axes["箱の向きと大きさ"]
```

---

## 2. SVD (Singular Value Decomposition)
「位置を合わせる」

衣装を素体に重ねるための最適な移動・回転・拡大縮小を一発で計算します。
「なるべく全ての点が重なるような変換」を数学的に算出します。

*   剛体変換: 形を変えずに移動・回転のみ。
*   類似変換: 上記に加え、全体のサイズ調整も行う。

---

## 3. RBF (Radial Basis Function)
「滑らかに変形する」

SVDで大まかな位置を合わせた後、細部をRBFで変形します。
「ここをこのくらい動かす」という制御点の情報を、周囲の頂点へ滑らかに波及させます。

*   滑らかさ: 自然な布の質感を維持します。
*   KDTree: 数万頂点のメッシュでも高速に計算するために使用します。

---

## まとめ

| 技術 | 役割 |
|------|------|
| OBB | 形と向きの検出 |
| SVD | 大まかな位置合わせ (位置・回転・サイズ) |
| RBF | 高品質な細部変形 (自動フィッティング) |
